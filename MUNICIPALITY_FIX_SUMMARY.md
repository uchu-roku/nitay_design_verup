# 市町村表示問題の修正サマリー

## 問題

北斗市（コード05）と函館市（コード19）が市町村リストに表示されない。

## 原因分析

### 1. データは存在していた
- Shapefile: 北斗市 8,178件、函館市 18,926件
- レイヤーファイル: `layers_01050.json`（7.3MB）、`layers_01190.json`（16.8MB）

### 2. コード体系の混在
- **2桁コード**（UI表示用）: 05 = 北斗市、19 = 函館市
- **5桁コード**（ファイル名）: 01050 = 北斗市、01190 = 函館市

### 3. マッピングの欠如
フロントエンドが2桁コードから5桁コードに変換できず、正しいファイルを読み込めなかった。

## 解決策

### 実装内容

1. **municipality_mapping.json の作成**
   - 2桁コードと5桁コードのマッピングファイル
   - 全11市町村に対応

2. **ファイル配置**
   - バックエンド: `backend/data/administrative/rinsyousigen/municipality_mapping.json`
   - フロントエンド: `frontend/public/data/administrative/kitamirinsyou/municipality_mapping.json`

3. **市町村コードマスターの修正**
   - 文字化けを修正
   - 正しい市町村名を設定

## デプロイ情報

- **コミットID**: b5059c7
- **プッシュ日時**: 2026年2月4日 22:50
- **デプロイ先**: https://uchu-roku.github.io/nitay_design_verup/

## 対応市町村

全11市町村（渡島振興局）:
1. 松前町（01010）
2. 福島町（01020）
3. 知内町（01030）
4. 木古内町（01040）
5. **北斗市（01050）** ← 修正対象
6. 七飯町（01070）
7. 鹿部町（01130）
8. 森町（01150）
9. 八雲町（01160）
10. 長万部町（01170）
11. **函館市（01190）** ← 修正対象

## 確認事項

GitHub Actions のビルドが完了後、以下を確認してください：

1. サイトにアクセス: https://uchu-roku.github.io/nitay_design_verup/
2. 市町村リストに「北斗市」「函館市」が表示されることを確認
3. 各市町村を選択してデータが正しく読み込まれることを確認
